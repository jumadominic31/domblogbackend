{"{\"assumptions\":{},\"sourceRoot\":\"/Users/djuma/learning/react/myblogbackend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/djuma/learning/react/myblogbackend\",\"filename\":\"/Users/djuma/learning/react/myblogbackend/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/djuma/learning/react/myblogbackend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// const articlesInfo = {\n//     \"learn-react\" : { upvotes: 0, comments: [], },\n//     \"learn-node\" : { upvotes: 0, comments: [], },\n//     \"my-thoughts-on-resumes\" : { upvotes: 0, comments: [], },\n// }\nvar app = (0, _express[\"default\"])();\napp.use(_express[\"default\"][\"static\"](_path[\"default\"].join(__dirname, '/build')));\napp.use(_bodyParser[\"default\"].json());\n\nvar withDB = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(operations, res) {\n    var uri, client, db;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            uri = 'mongodb+srv://admin:Systie267@devcamper.mdih4.mongodb.net/?retryWrites=true&w=majority';\n            client = new _mongodb.MongoClient(uri, {\n              useNewUrlParser: true,\n              useUnifiedTopology: true,\n              serverApi: _mongodb.ServerApiVersion.v1\n            });\n            _context.prev = 2;\n            _context.next = 5;\n            return client.connect();\n\n          case 5:\n            db = client.db('my-blog');\n            _context.next = 8;\n            return operations(db);\n\n          case 8:\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](2);\n            res.status(500).json({\n              message: 'Error connecting to db',\n              err: _context.t0\n            });\n\n          case 13:\n            _context.prev = 13;\n            _context.next = 16;\n            return client.close();\n\n          case 16:\n            return _context.finish(13);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 10, 13, 17]]);\n  }));\n\n  return function withDB(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\napp.get('/api/articles/:name', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req, res) {\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            withDB( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(db) {\n                var articleName, articlesInfo;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        articleName = req.params.name;\n                        _context2.next = 3;\n                        return db.collection('articles').findOne({\n                          name: articleName\n                        });\n\n                      case 3:\n                        articlesInfo = _context2.sent;\n                        res.status(200).json(articlesInfo);\n\n                      case 5:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x5) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), res); // const uri = 'mongodb+srv://admin:Systie267@devcamper.mdih4.mongodb.net/?retryWrites=true&w=majority';\n            // const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true, serverApi: ServerApiVersion.v1 });\n            // try {\n            //     await client.connect();\n            //     const db = client.db('my-blog');\n            //     const articlesInfo = await db.collection('articles').findOne({name: articleName});\n            //     res.status(200).json(articlesInfo);\n            // }\n            // catch (err) {\n            //     res.status(500).json({message: 'Error connecting to db', err})\n            // }\n            // finally {\n            //     await client.close();\n            // }\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/api/articles/:name/upvote', /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(req, res) {\n    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            withDB( /*#__PURE__*/function () {\n              var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(db) {\n                var articleName, articleInfo, updatedArticleInfo;\n                return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        articleName = req.params.name;\n                        _context4.next = 3;\n                        return db.collection('articles').findOne({\n                          name: articleName\n                        });\n\n                      case 3:\n                        articleInfo = _context4.sent;\n                        _context4.next = 6;\n                        return db.collection('articles').updateOne({\n                          name: articleName\n                        }, {\n                          '$set': {\n                            upvotes: articleInfo.upvotes + 1\n                          }\n                        });\n\n                      case 6:\n                        _context4.next = 8;\n                        return db.collection('articles').findOne({\n                          name: articleName\n                        });\n\n                      case 8:\n                        updatedArticleInfo = _context4.sent;\n                        res.status(200).json(updatedArticleInfo);\n\n                      case 10:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _callee4);\n              }));\n\n              return function (_x8) {\n                return _ref5.apply(this, arguments);\n              };\n            }(), res);\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x6, _x7) {\n    return _ref4.apply(this, arguments);\n  };\n}());\napp.post('/api/articles/:name/add-comment', function (req, res) {\n  var _req$body = req.body,\n      username = _req$body.username,\n      text = _req$body.text;\n  var articleName = req.params.name;\n  withDB( /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(db) {\n      var articleInfo, updatedArticleInfo;\n      return regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return db.collection('articles').findOne({\n                name: articleName\n              });\n\n            case 2:\n              articleInfo = _context6.sent;\n              _context6.next = 5;\n              return db.collection('articles').updateOne({\n                name: articleName\n              }, {\n                '$set': {\n                  comments: articleInfo.comments.concat({\n                    username: username,\n                    text: text\n                  })\n                }\n              });\n\n            case 5:\n              _context6.next = 7;\n              return db.collection('articles').findOne({\n                name: articleName\n              });\n\n            case 7:\n              updatedArticleInfo = _context6.sent;\n              res.status(200).json(updatedArticleInfo);\n\n            case 9:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function (_x9) {\n      return _ref6.apply(this, arguments);\n    };\n  }(), res);\n});\napp.get('*', function (req, res) {\n  res.sendFile(_path[\"default\"].join(__dirname + '/build/index.html'));\n});\napp.listen(8000, function () {\n  return console.log('listening on port 8000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJleHByZXNzIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJib2R5UGFyc2VyIiwianNvbiIsIndpdGhEQiIsIm9wZXJhdGlvbnMiLCJyZXMiLCJ1cmkiLCJjbGllbnQiLCJNb25nb0NsaWVudCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInNlcnZlckFwaSIsIlNlcnZlckFwaVZlcnNpb24iLCJ2MSIsImNvbm5lY3QiLCJkYiIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlcnIiLCJjbG9zZSIsImdldCIsInJlcSIsImFydGljbGVOYW1lIiwicGFyYW1zIiwibmFtZSIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiYXJ0aWNsZXNJbmZvIiwicG9zdCIsImFydGljbGVJbmZvIiwidXBkYXRlT25lIiwidXB2b3RlcyIsInVwZGF0ZWRBcnRpY2xlSW5mbyIsImJvZHkiLCJ1c2VybmFtZSIsInRleHQiLCJjb21tZW50cyIsImNvbmNhdCIsInNlbmRGaWxlIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2RqdW1hL2xlYXJuaW5nL3JlYWN0L215YmxvZ2JhY2tlbmQvc3JjLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IHsgTW9uZ29DbGllbnQsIFNlcnZlckFwaVZlcnNpb24gfSBmcm9tICdtb25nb2RiJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG4vLyBjb25zdCBhcnRpY2xlc0luZm8gPSB7XG4vLyAgICAgXCJsZWFybi1yZWFjdFwiIDogeyB1cHZvdGVzOiAwLCBjb21tZW50czogW10sIH0sXG4vLyAgICAgXCJsZWFybi1ub2RlXCIgOiB7IHVwdm90ZXM6IDAsIGNvbW1lbnRzOiBbXSwgfSxcbi8vICAgICBcIm15LXRob3VnaHRzLW9uLXJlc3VtZXNcIiA6IHsgdXB2b3RlczogMCwgY29tbWVudHM6IFtdLCB9LFxuLy8gfVxuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy9idWlsZCcpKSlcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuXG5jb25zdCB3aXRoREIgPSBhc3luYyAob3BlcmF0aW9ucywgcmVzKSA9PiB7XG4gICAgY29uc3QgdXJpID0gJ21vbmdvZGIrc3J2Oi8vYWRtaW46U3lzdGllMjY3QGRldmNhbXBlci5tZGloNC5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JztcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLCBzZXJ2ZXJBcGk6IFNlcnZlckFwaVZlcnNpb24udjEgfSk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICAgICAgICBjb25zdCBkYiA9IGNsaWVudC5kYignbXktYmxvZycpO1xuICAgICAgICBhd2FpdCBvcGVyYXRpb25zKGRiKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTogJ0Vycm9yIGNvbm5lY3RpbmcgdG8gZGInLCBlcnJ9KVxuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgfVxufTtcblxuYXBwLmdldCgnL2FwaS9hcnRpY2xlcy86bmFtZScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHdpdGhEQihhc3luYyAoZGIpID0+IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZU5hbWUgID0gcmVxLnBhcmFtcy5uYW1lO1xuICAgICAgICBjb25zdCBhcnRpY2xlc0luZm8gPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdhcnRpY2xlcycpLmZpbmRPbmUoe25hbWU6IGFydGljbGVOYW1lfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFydGljbGVzSW5mbyk7XG4gICAgfSwgcmVzKVxuICAgIFxuXG4gICAgLy8gY29uc3QgdXJpID0gJ21vbmdvZGIrc3J2Oi8vYWRtaW46U3lzdGllMjY3QGRldmNhbXBlci5tZGloNC5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JztcbiAgICAvLyBjb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLCBzZXJ2ZXJBcGk6IFNlcnZlckFwaVZlcnNpb24udjEgfSk7XG5cbiAgICAvLyB0cnkge1xuICAgIC8vICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICAgIC8vICAgICBjb25zdCBkYiA9IGNsaWVudC5kYignbXktYmxvZycpO1xuICAgIC8vICAgICBjb25zdCBhcnRpY2xlc0luZm8gPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdhcnRpY2xlcycpLmZpbmRPbmUoe25hbWU6IGFydGljbGVOYW1lfSk7XG4gICAgLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFydGljbGVzSW5mbyk7XG4gICAgLy8gfVxuICAgIC8vIGNhdGNoIChlcnIpIHtcbiAgICAvLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6ICdFcnJvciBjb25uZWN0aW5nIHRvIGRiJywgZXJyfSlcbiAgICAvLyB9XG4gICAgLy8gZmluYWxseSB7XG4gICAgLy8gICAgIGF3YWl0IGNsaWVudC5jbG9zZSgpO1xuICAgIC8vIH1cbn0pXG5cbmFwcC5wb3N0KCcvYXBpL2FydGljbGVzLzpuYW1lL3Vwdm90ZScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHdpdGhEQihhc3luYyAoZGIpID0+IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZU5hbWUgPSByZXEucGFyYW1zLm5hbWU7XG4gICAgICAgIGNvbnN0IGFydGljbGVJbmZvID0gYXdhaXQgZGIuY29sbGVjdGlvbignYXJ0aWNsZXMnKS5maW5kT25lKHtuYW1lOiBhcnRpY2xlTmFtZX0pO1xuICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdhcnRpY2xlcycpLnVwZGF0ZU9uZSh7bmFtZTogYXJ0aWNsZU5hbWV9LCB7JyRzZXQnOiB7XG4gICAgICAgICAgICB1cHZvdGVzOiBhcnRpY2xlSW5mby51cHZvdGVzICsgMSwgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRBcnRpY2xlSW5mbyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2FydGljbGVzJykuZmluZE9uZSh7bmFtZTogYXJ0aWNsZU5hbWV9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odXBkYXRlZEFydGljbGVJbmZvKTtcbiAgICB9LCByZXMpXG4gICAgXG59KVxuXG5hcHAucG9zdCgnL2FwaS9hcnRpY2xlcy86bmFtZS9hZGQtY29tbWVudCcsIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHt1c2VybmFtZSwgdGV4dH0gPSByZXEuYm9keTtcbiAgICBjb25zdCBhcnRpY2xlTmFtZSA9IHJlcS5wYXJhbXMubmFtZTtcbiAgICB3aXRoREIoYXN5bmMgKGRiKSA9PiB7XG4gICAgICAgIGNvbnN0IGFydGljbGVJbmZvID0gYXdhaXQgZGIuY29sbGVjdGlvbignYXJ0aWNsZXMnKS5maW5kT25lKHtuYW1lOiBhcnRpY2xlTmFtZX0pO1xuICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdhcnRpY2xlcycpLnVwZGF0ZU9uZSh7bmFtZTogYXJ0aWNsZU5hbWV9LCB7JyRzZXQnOiB7XG4gICAgICAgICAgICBjb21tZW50czogYXJ0aWNsZUluZm8uY29tbWVudHMuY29uY2F0KHt1c2VybmFtZSwgdGV4dH0pIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB1cGRhdGVkQXJ0aWNsZUluZm8gPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdhcnRpY2xlcycpLmZpbmRPbmUoe25hbWU6IGFydGljbGVOYW1lfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVwZGF0ZWRBcnRpY2xlSW5mbyk7XG4gICAgfSwgcmVzKVxufSk7XG5cbmFwcC5nZXQoJyonLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArICcvYnVpbGQvaW5kZXguaHRtbCcpKTtcbn0pO1xuXG5hcHAubGlzdGVuKDgwMDAsICgpID0+IGNvbnNvbGUubG9nKCdsaXN0ZW5pbmcgb24gcG9ydCA4MDAwJykpOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTUEsR0FBRyxHQUFHLDBCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyw4QkFBZUMsaUJBQUtDLElBQUwsQ0FBVUMsU0FBVixFQUFxQixRQUFyQixDQUFmLENBQVI7QUFDQUwsR0FBRyxDQUFDQyxHQUFKLENBQVFLLHVCQUFXQyxJQUFYLEVBQVI7O0FBRUEsSUFBTUMsTUFBTTtFQUFBLG1FQUFHLGlCQUFPQyxVQUFQLEVBQW1CQyxHQUFuQjtJQUFBO0lBQUE7TUFBQTtRQUFBO1VBQUE7WUFDTEMsR0FESyxHQUNDLHdGQUREO1lBRUxDLE1BRkssR0FFSSxJQUFJQyxvQkFBSixDQUFnQkYsR0FBaEIsRUFBcUI7Y0FBRUcsZUFBZSxFQUFFLElBQW5CO2NBQXlCQyxrQkFBa0IsRUFBRSxJQUE3QztjQUFtREMsU0FBUyxFQUFFQywwQkFBaUJDO1lBQS9FLENBQXJCLENBRko7WUFBQTtZQUFBO1lBQUEsT0FLRE4sTUFBTSxDQUFDTyxPQUFQLEVBTEM7O1VBQUE7WUFNREMsRUFOQyxHQU1JUixNQUFNLENBQUNRLEVBQVAsQ0FBVSxTQUFWLENBTko7WUFBQTtZQUFBLE9BT0RYLFVBQVUsQ0FBQ1csRUFBRCxD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","map":{"version":3,"names":["app","use","express","path","join","__dirname","bodyParser","json","withDB","operations","res","uri","client","MongoClient","useNewUrlParser","useUnifiedTopology","serverApi","ServerApiVersion","v1","connect","db","status","message","err","close","get","req","articleName","params","name","collection","findOne","articlesInfo","post","articleInfo","updateOne","upvotes","updatedArticleInfo","body","username","text","comments","concat","sendFile","listen","console","log"],"sourceRoot":"/Users/djuma/learning/react/myblogbackend/src/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport { MongoClient, ServerApiVersion } from 'mongodb';\nimport path from 'path';\n\n// const articlesInfo = {\n//     \"learn-react\" : { upvotes: 0, comments: [], },\n//     \"learn-node\" : { upvotes: 0, comments: [], },\n//     \"my-thoughts-on-resumes\" : { upvotes: 0, comments: [], },\n// }\n\nconst app = express();\n\napp.use(express.static(path.join(__dirname, '/build')))\napp.use(bodyParser.json());\n\nconst withDB = async (operations, res) => {\n    const uri = 'mongodb+srv://admin:Systie267@devcamper.mdih4.mongodb.net/?retryWrites=true&w=majority';\n    const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true, serverApi: ServerApiVersion.v1 });\n\n    try {\n        await client.connect();\n        const db = client.db('my-blog');\n        await operations(db);\n    }\n    catch (err) {\n        res.status(500).json({message: 'Error connecting to db', err})\n    }\n    finally {\n        await client.close();\n    }\n};\n\napp.get('/api/articles/:name', async (req, res) => {\n    withDB(async (db) => {\n        const articleName  = req.params.name;\n        const articlesInfo = await db.collection('articles').findOne({name: articleName});\n        res.status(200).json(articlesInfo);\n    }, res)\n    \n\n    // const uri = 'mongodb+srv://admin:Systie267@devcamper.mdih4.mongodb.net/?retryWrites=true&w=majority';\n    // const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true, serverApi: ServerApiVersion.v1 });\n\n    // try {\n    //     await client.connect();\n    //     const db = client.db('my-blog');\n    //     const articlesInfo = await db.collection('articles').findOne({name: articleName});\n    //     res.status(200).json(articlesInfo);\n    // }\n    // catch (err) {\n    //     res.status(500).json({message: 'Error connecting to db', err})\n    // }\n    // finally {\n    //     await client.close();\n    // }\n})\n\napp.post('/api/articles/:name/upvote', async (req, res) => {\n    withDB(async (db) => {\n        const articleName = req.params.name;\n        const articleInfo = await db.collection('articles').findOne({name: articleName});\n        await db.collection('articles').updateOne({name: articleName}, {'$set': {\n            upvotes: articleInfo.upvotes + 1, },\n        });\n        const updatedArticleInfo = await db.collection('articles').findOne({name: articleName});\n        res.status(200).json(updatedArticleInfo);\n    }, res)\n    \n})\n\napp.post('/api/articles/:name/add-comment', (req, res) => {\n    const {username, text} = req.body;\n    const articleName = req.params.name;\n    withDB(async (db) => {\n        const articleInfo = await db.collection('articles').findOne({name: articleName});\n        await db.collection('articles').updateOne({name: articleName}, {'$set': {\n            comments: articleInfo.comments.concat({username, text}) },\n        });\n        const updatedArticleInfo = await db.collection('articles').findOne({name: articleName});\n        res.status(200).json(updatedArticleInfo);\n    }, res)\n});\n\napp.get('*', (req, res) => {\n    res.sendFile(path.join(__dirname + '/build/index.html'));\n});\n\napp.listen(8000, () => console.log('listening on port 8000'));"],"mappings":"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"}},"mtime":1652803038351}}